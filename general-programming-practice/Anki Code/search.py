import json
from pprint import pprint
import requests


def search(query: str):
    r = requests.post('http://127.0.0.1:8765', json={
        "action": "findCards",
        "version": 6,
        "params": {
            "query": f"{query}"
        }
    })

    return r

def getCardInfo(cardList: list):
    r = requests.post('http://127.0.0.1:8765', json={
        "action": "cardsInfo",
        "version": 6,
        "params": {
            "cards": cardList
        }
    })

    return r



cards = json.loads('{"result": [1636112407711, 1636112407713, 1636112411708, 1636112411721, 1636112411722, 1636112411729, 1636112417073, 1638120213729, 1638358681682, 1638358681683, 1638358681684, 1638358681685, 1638358709614, 1638358709615, 1638358709616, 1638358830186, 1638358830187, 1638358830188, 1638358830189, 1638359091148, 1638359454166, 1638359454167, 1638359454168, 1638359461889, 1638359756533, 1638359756534, 1638379992774, 1638379992775, 1638379992776, 1638379992777, 1638380420568, 1638532139660, 1638532139661, 1638532251072, 1638532705263, 1638533851872, 1638534420196, 1643382610229, 1643383214051, 1652195327232, 1653657416157, 1653659610817, 1653659610818, 1653659610819], "error": null}')
cards = cards['result']

with open('marked_cards.json', 'w+') as f:
    f.write(getCardInfo(cards).text)

